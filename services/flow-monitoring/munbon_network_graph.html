<!DOCTYPE html>
<html>
<head>
    <title>Munbon Irrigation Network Graph</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        #network {
            width: 100%;
            height: 1200px;
            border: 1px solid #ddd;
            margin-top: 20px;
        }
        .legend {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        .legend-color {
            width: 40px;
            height: 40px;
            border: 2px solid #000;
            border-radius: 50%;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .info {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Munbon Irrigation Network Structure</h1>
    <div class="info">
        <strong>Updated from SCADA 2025-07-13 V0.95</strong><br>
        Total Gates: 59 | Total Connections: 59
    </div>
    
    <div class="legend">
        <div class="legend-item">
            <div class="legend-color" style="background: darkgreen;"></div>
            <span>Source</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF6B6B;"></div>
            <span>Zone 1</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #4ECDC4;"></div>
            <span>Zone 2</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #45B7D1;"></div>
            <span>Zone 3</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #96CEB4;"></div>
            <span>Zone 4</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FECA57;"></div>
            <span>Zone 5</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #DDA0DD;"></div>
            <span>Zone 6</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <script>
        // Network data from the JSON
        const networkData = {
            "gates": {
                "M(0,0)": {"canal": "Outlet", "zone": 1},
                "M(0,1)": {"canal": "LMC", "zone": 0},
                "M(0,2)": {"canal": "LMC", "zone": 1},
                "M(0,3)": {"canal": "LMC", "zone": 1},
                "M(0,4)": {"canal": "LMC", "zone": 1},
                "M(0,5)": {"canal": "LMC", "zone": 2},
                "M(0,6)": {"canal": "LMC", "zone": 2},
                "M(0,7)": {"canal": "LMC", "zone": 2},
                "M(0,8)": {"canal": "LMC", "zone": 2},
                "M(0,9)": {"canal": "LMC", "zone": 2},
                "M(0,10)": {"canal": "LMC", "zone": 2},
                "M(0,11)": {"canal": "LMC", "zone": 2},
                "M(0,12)": {"canal": "LMC", "zone": 2},
                "M(0,13)": {"canal": "LMC", "zone": 2},
                "M(0,14)": {"canal": "LMC", "zone": 2},
                "M(0,0; 1,0)": {"canal": "Waste Way", "zone": 1},
                "M (0,1; 1,0)": {"canal": "RMC", "zone": 6},
                "M (0,1; 1,1)": {"canal": "RMC", "zone": 6},
                "M (0,1; 1,2)": {"canal": "RMC", "zone": 6},
                "M (0,1; 1,3)": {"canal": "RMC", "zone": 6},
                "M (0,1; 1,4)": {"canal": "RMC", "zone": 6},
                "M(0,1; 1,0; 1,0)": {"canal": "FTO 2+450", "zone": 6},
                "M(0,1; 1,1; 1,0)": {"canal": "4L-RMC", "zone": 6},
                "M(0,1; 1,1; 1,1)": {"canal": "4L-RMC", "zone": 6},
                "M(0,1; 1,1; 1,2)": {"canal": "4L-RMC", "zone": 6},
                "M(0,1; 1,1; 1,3)": {"canal": "4L-RMC", "zone": 6},
                "M(0,1; 1,1; 1,4)": {"canal": "4L-RMC", "zone": 6},
                "M(0,1; 1,1; 1,2; 1,0)": {"canal": "FTO337 Rai", "zone": 6},
                "M (0,3; 1,0)": {"canal": "9R-LMC", "zone": 3},
                "M (0,3; 1,1)": {"canal": "9R-LMC", "zone": 3},
                "M (0,3; 1,2)": {"canal": "9R-LMC", "zone": 3},
                "M (0,3; 1,3)": {"canal": "9R-LMC", "zone": 3},
                "M (0,3; 1,1; 1,0)": {"canal": "7R-9R-LMC", "zone": 3},
                "M (0,3; 1,1; 1,1)": {"canal": "7R-9R-LMC", "zone": 3},
                "M (0,3; 1,1; 2,0)": {"canal": "7L-9R-LMC", "zone": 3},
                "M (0,3; 1,1; 2,1)": {"canal": "7L-9R-LMC", "zone": 3},
                "M (0,12; 1,0)": {"canal": "38R-LMC", "zone": 4},
                "M (0,12; 1,1)": {"canal": "38R-LMC", "zone": 4},
                "M (0,12; 1,2)": {"canal": "38R-LMC", "zone": 4},
                "M (0,12; 1,3)": {"canal": "38R-LMC", "zone": 5},
                "M (0,12; 1,4)": {"canal": "38R-LMC", "zone": 5},
                "M (0,12; 1,5)": {"canal": "38R-LMC", "zone": 5},
                "M (0,12; 1,0; 1,0)": {"canal": "1R-38R-LMC", "zone": 4},
                "M (0,12; 1,0; 1,1)": {"canal": "1R-38R-LMC", "zone": 4},
                "M (0,12; 1,1; 1,0)": {"canal": "2R-38R-LMC", "zone": 4},
                "M (0,12; 1,1; 1,1)": {"canal": "2R-38R-LMC", "zone": 4},
                "M (0,12; 1,1; 1,2)": {"canal": "2R-38R-LMC", "zone": 4},
                "M (0,12; 1,1; 1,0; 1,0)": {"canal": "1R-2R-38R-LMC", "zone": 4},
                "M (0,12; 1,1; 1,0; 1,1)": {"canal": "1R-2R-38R-LMC", "zone": 4},
                "M (0,12; 1,1; 1,0; 1,2)": {"canal": "1R-2R-38R-LMC", "zone": 4},
                "M (0,12; 1,2; 1,0)": {"canal": "4L-38R-LMC", "zone": 5},
                "M (0,12; 1,2; 1,1)": {"canal": "4L-38R-LMC", "zone": 5},
                "M (0,12; 1,2; 1,2)": {"canal": "4L-38R-LMC", "zone": 5},
                "M (0,12; 1,2; 1,0; 1,0)": {"canal": "5R-4L-38R-LMC", "zone": 5},
                "M (0,12; 1,2; 1,0; 1,1)": {"canal": "5R-4L-38R-LMC", "zone": 5},
                "M (0,12; 1,3; 1,0)": {"canal": "6R-38R-LMC", "zone": 5},
                "M (0,12; 1,3; 1,1)": {"canal": "6R-38R-LMC", "zone": 5},
                "M (0,12; 1,4; 1,0)": {"canal": "8R-38R-LMC", "zone": 5},
                "M (0,12; 1,4; 1,1)": {"canal": "8R-38R-LMC", "zone": 5}
            }
        };
        
        // Color mapping
        const zoneColors = {
            0: '#95A5A6',  // Gray
            1: '#FF6B6B',  // Red
            2: '#4ECDC4',  // Teal
            3: '#45B7D1',  // Blue
            4: '#96CEB4',  // Green
            5: '#FECA57',  // Yellow
            6: '#DDA0DD'   // Plum
        };
        
        // Create nodes
        const nodes = new vis.DataSet([
            {id: 'S', label: 'S', color: 'darkgreen', shape: 'circle', size: 50, font: {color: 'white', size: 24, strokeWidth: 4, strokeColor: '#ffffff'}}
        ]);
        
        // Add gate nodes
        Object.entries(networkData.gates).forEach(([gate, info]) => {
            nodes.add({
                id: gate,
                label: gate,
                color: zoneColors[info.zone] || '#95A5A6',
                shape: 'dot',
                size: 40,
                font: {
                    size: 18,
                    color: '#000000',
                    face: 'Arial',
                    bold: true,
                    strokeWidth: 4,
                    strokeColor: '#ffffff'
                },
                title: `${gate}\nCanal: ${info.canal}\nZone: ${info.zone}`
            });
        });
        
        // Create edges based on the network structure
        const edges = new vis.DataSet([
            {from: 'S', to: 'M(0,0)'},
            {from: 'M(0,0)', to: 'M(0,1)'},
            {from: 'M(0,0)', to: 'M(0,2)'},
            {from: 'M(0,0)', to: 'M(0,0; 1,0)'},
            // LMC progression
            {from: 'M(0,2)', to: 'M(0,3)'},
            {from: 'M(0,3)', to: 'M(0,4)'},
            {from: 'M(0,4)', to: 'M(0,5)'},
            {from: 'M(0,5)', to: 'M(0,6)'},
            {from: 'M(0,6)', to: 'M(0,7)'},
            {from: 'M(0,7)', to: 'M(0,8)'},
            {from: 'M(0,8)', to: 'M(0,9)'},
            {from: 'M(0,9)', to: 'M(0,10)'},
            {from: 'M(0,10)', to: 'M(0,11)'},
            {from: 'M(0,11)', to: 'M(0,12)'},
            {from: 'M(0,12)', to: 'M(0,13)'},
            {from: 'M(0,13)', to: 'M(0,14)'},
            // RMC branches
            {from: 'M(0,1)', to: 'M (0,1; 1,0)'},
            {from: 'M(0,1)', to: 'M (0,1; 1,1)'},
            {from: 'M(0,1)', to: 'M (0,1; 1,2)'},
            {from: 'M(0,1)', to: 'M (0,1; 1,3)'},
            {from: 'M(0,1)', to: 'M (0,1; 1,4)'},
            {from: 'M (0,1; 1,0)', to: 'M(0,1; 1,0; 1,0)'},
            // 4L-RMC
            {from: 'M (0,1; 1,1)', to: 'M(0,1; 1,1; 1,0)'},
            {from: 'M (0,1; 1,1)', to: 'M(0,1; 1,1; 1,1)'},
            {from: 'M (0,1; 1,1)', to: 'M(0,1; 1,1; 1,2)'},
            {from: 'M (0,1; 1,1)', to: 'M(0,1; 1,1; 1,3)'},
            {from: 'M (0,1; 1,1)', to: 'M(0,1; 1,1; 1,4)'},
            {from: 'M(0,1; 1,1; 1,2)', to: 'M(0,1; 1,1; 1,2; 1,0)'},
            // 9R-LMC branches
            {from: 'M(0,3)', to: 'M (0,3; 1,0)'},
            {from: 'M(0,3)', to: 'M (0,3; 1,1)'},
            {from: 'M(0,3)', to: 'M (0,3; 1,2)'},
            {from: 'M(0,3)', to: 'M (0,3; 1,3)'},
            {from: 'M (0,3; 1,1)', to: 'M (0,3; 1,1; 1,0)'},
            {from: 'M (0,3; 1,1)', to: 'M (0,3; 1,1; 1,1)'},
            {from: 'M (0,3; 1,1)', to: 'M (0,3; 1,1; 2,0)'},
            {from: 'M (0,3; 1,1)', to: 'M (0,3; 1,1; 2,1)'},
            // 38R-LMC branches
            {from: 'M(0,12)', to: 'M (0,12; 1,0)'},
            {from: 'M(0,12)', to: 'M (0,12; 1,1)'},
            {from: 'M(0,12)', to: 'M (0,12; 1,2)'},
            {from: 'M(0,12)', to: 'M (0,12; 1,3)'},
            {from: 'M(0,12)', to: 'M (0,12; 1,4)'},
            {from: 'M(0,12)', to: 'M (0,12; 1,5)'},
            // Sub-branches
            {from: 'M (0,12; 1,0)', to: 'M (0,12; 1,0; 1,0)'},
            {from: 'M (0,12; 1,0)', to: 'M (0,12; 1,0; 1,1)'},
            {from: 'M (0,12; 1,1)', to: 'M (0,12; 1,1; 1,0)'},
            {from: 'M (0,12; 1,1)', to: 'M (0,12; 1,1; 1,1)'},
            {from: 'M (0,12; 1,1)', to: 'M (0,12; 1,1; 1,2)'},
            {from: 'M (0,12; 1,1; 1,0)', to: 'M (0,12; 1,1; 1,0; 1,0)'},
            {from: 'M (0,12; 1,1; 1,0)', to: 'M (0,12; 1,1; 1,0; 1,1)'},
            {from: 'M (0,12; 1,1; 1,0)', to: 'M (0,12; 1,1; 1,0; 1,2)'},
            {from: 'M (0,12; 1,2)', to: 'M (0,12; 1,2; 1,0)'},
            {from: 'M (0,12; 1,2)', to: 'M (0,12; 1,2; 1,1)'},
            {from: 'M (0,12; 1,2)', to: 'M (0,12; 1,2; 1,2)'},
            {from: 'M (0,12; 1,2; 1,0)', to: 'M (0,12; 1,2; 1,0; 1,0)'},
            {from: 'M (0,12; 1,2; 1,0)', to: 'M (0,12; 1,2; 1,0; 1,1)'},
            {from: 'M (0,12; 1,3)', to: 'M (0,12; 1,3; 1,0)'},
            {from: 'M (0,12; 1,3)', to: 'M (0,12; 1,3; 1,1)'},
            {from: 'M (0,12; 1,4)', to: 'M (0,12; 1,4; 1,0)'},
            {from: 'M (0,12; 1,4)', to: 'M (0,12; 1,4; 1,1)'}
        ]);
        
        // Create network
        const container = document.getElementById('network');
        const data = {
            nodes: nodes,
            edges: edges
        };
        
        const options = {
            layout: {
                hierarchical: {
                    direction: 'UD',
                    sortMethod: 'directed',
                    nodeSpacing: 300,
                    levelSeparation: 350,
                    parentCentralization: true
                }
            },
            physics: {
                enabled: false
            },
            nodes: {
                font: {
                    size: 18,
                    color: '#000000',
                    face: 'Arial',
                    bold: true,
                    strokeWidth: 4,
                    strokeColor: '#ffffff'
                },
                scaling: {
                    label: {
                        enabled: true,
                        min: 18,
                        max: 24
                    }
                }
            },
            edges: {
                arrows: {
                    to: {
                        enabled: true,
                        scaleFactor: 0.5
                    }
                },
                smooth: {
                    type: 'cubicBezier',
                    roundness: 0.4
                },
                color: {
                    color: '#848484',
                    highlight: '#000000'
                },
                width: 2
            },
            interaction: {
                hover: true,
                tooltipDelay: 100,
                zoomView: true,
                dragView: true
            }
        };
        
        const network = new vis.Network(container, data, options);
        
        // Add click event
        network.on("click", function (params) {
            if (params.nodes.length > 0) {
                const nodeId = params.nodes[0];
                const nodeInfo = networkData.gates[nodeId];
                if (nodeInfo) {
                    alert(`Gate: ${nodeId}\nCanal: ${nodeInfo.canal}\nZone: ${nodeInfo.zone}`);
                }
            }
        });
    </script>
</body>
</html>
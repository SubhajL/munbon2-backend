<!DOCTYPE html>
<html>
<head>
    <title>Munbon Irrigation - Gate Hydraulics Analysis</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 { color: #333; text-align: center; }
        h2 { color: #666; margin-top: 30px; }
        .gate-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .gate-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .gate-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .gate-type-sluice { border-left: 4px solid #FF6B6B; }
        .gate-type-radial { border-left: 4px solid #4ECDC4; }
        .gate-type-butterfly { border-left: 4px solid #45B7D1; }
        .warning { color: #d32f2f; font-weight: bold; }
        .chart { margin: 30px 0; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gate-Specific Hydraulics Analysis</h1>
        
        <div class="gate-info">
            <h3>Gate Types in Network</h3>
            <ul>
                <li><strong>Sluice Gates:</strong> Vertical lift gates - most common type</li>
                <li><strong>Radial Gates:</strong> Curved gates - used in main canals</li>
                <li><strong>Butterfly Valves:</strong> Rotating disc - used for farm turnouts</li>
            </ul>
        </div>
        
        <h2>Gate Specifications</h2>
        <div class="gate-specs">

            <div class="gate-card gate-type-sluice-gate">
                <h4>M(0,0)</h4>
                <p><strong>Type:</strong> sluice_gate</p>
                <p><strong>Size:</strong> 2.5m × 1.5m</p>
                <p><strong>Location:</strong> Outlet</p>
                <p><strong>Capacity:</strong> 11.2 m³/s</p>
            </div>

            <div class="gate-card gate-type-sluice-gate">
                <h4>M(0,1)</h4>
                <p><strong>Type:</strong> sluice_gate</p>
                <p><strong>Size:</strong> 1.5m × 1.0m</p>
                <p><strong>Location:</strong> LMC</p>
                <p><strong>Capacity:</strong> nan m³/s</p>
            </div>

            <div class="gate-card gate-type-sluice-gate">
                <h4>M(0,3)</h4>
                <p><strong>Type:</strong> sluice_gate</p>
                <p><strong>Size:</strong> 2.5m × 1.0m</p>
                <p><strong>Location:</strong> LMC</p>
                <p><strong>Capacity:</strong> 8.7 m³/s</p>
            </div>

            <div class="gate-card gate-type-sluice-gate">
                <h4>M(0,12)</h4>
                <p><strong>Type:</strong> sluice_gate</p>
                <p><strong>Size:</strong> 1.5m × 1.0m</p>
                <p><strong>Location:</strong> LMC</p>
                <p><strong>Capacity:</strong> 4.2 m³/s</p>
            </div>

            <div class="gate-card gate-type-sluice-gate">
                <h4>M(0,1; 1,1; 1,2; 1,0)</h4>
                <p><strong>Type:</strong> sluice_gate</p>
                <p><strong>Size:</strong> 1.5m × 1.0m</p>
                <p><strong>Location:</strong> FTO337 Rai</p>
                <p><strong>Capacity:</strong> nan m³/s</p>
            </div>

        </div>
        
        <h2>Flow Characteristics by Water Level</h2>
        <div id="flowChart" class="chart"></div>
        
        <h2>Gate Performance Curves</h2>
        <div id="performanceChart" class="chart"></div>
        
        <h2>Hydraulic Analysis Summary</h2>
        <table>
            <tr>
                <th>Gate</th>
                <th>Type</th>
                <th>Normal Flow @ 50%</th>
                <th>Max Velocity</th>
                <th>Flow Regime</th>
                <th>Operational Notes</th>
            </tr>

            <tr>
                <td>M(0,0)</td>
                <td>sluice_gate</td>
                <td>4.9 m³/s</td>
                <td>3.29 m/s</td>
                <td>submerged_flow</td>
                <td><span class="warning">⚠️ High velocity risk</span></td>
            </tr>

            <tr>
                <td>M(0,1)</td>
                <td>sluice_gate</td>
                <td>2.0 m³/s</td>
                <td>3.29 m/s</td>
                <td>submerged_flow</td>
                <td><span class="warning">⚠️ High velocity risk</span></td>
            </tr>

            <tr>
                <td>M(0,2)</td>
                <td>sluice_gate</td>
                <td>3.3 m³/s</td>
                <td>3.29 m/s</td>
                <td>submerged_flow</td>
                <td><span class="warning">⚠️ High velocity risk</span></td>
            </tr>

            <tr>
                <td>M(0,3)</td>
                <td>sluice_gate</td>
                <td>3.3 m³/s</td>
                <td>3.29 m/s</td>
                <td>submerged_flow</td>
                <td><span class="warning">⚠️ High velocity risk</span></td>
            </tr>

            <tr>
                <td>M(0,12)</td>
                <td>sluice_gate</td>
                <td>2.0 m³/s</td>
                <td>3.29 m/s</td>
                <td>submerged_flow</td>
                <td><span class="warning">⚠️ High velocity risk</span></td>
            </tr>

        </table>
        
        <script>
            // Flow chart data
            var flowData = [];
            

            flowData.push({
                x: ["Main Outlet", "RMC Branch", "LMC Start", "9R Branch", "38R Branch"],
                y: [4.933392052300448, 1.9733568209201795, 3.288928034866965, 3.288928034866965, 1.9733568209201795],
                text: ["3.3 m/s", "3.3 m/s", "3.3 m/s", "3.3 m/s", "3.3 m/s"],
                name: 'Normal Operation',
                type: 'bar',
                marker: { color: '#FF6B6B' }
            });

            flowData.push({
                x: ["Main Outlet", "RMC Branch", "LMC Start", "9R Branch", "38R Branch"],
                y: [4.933492609613429, 1.9733970438453716, 3.2889950730756192, 3.2889950730756192, 1.9733970438453716],
                text: ["3.3 m/s", "3.3 m/s", "3.3 m/s", "3.3 m/s", "3.3 m/s"],
                name: 'High Water Level',
                type: 'bar',
                marker: { color: '#4ECDC4' }
            });

            flowData.push({
                x: ["Main Outlet", "RMC Branch", "LMC Start", "9R Branch", "38R Branch"],
                y: [4.274803208940822, 1.7099212835763289, 2.849868805960548, 2.849868805960548, 1.7099212835763289],
                text: ["2.8 m/s", "2.8 m/s", "2.8 m/s", "2.8 m/s", "2.8 m/s"],
                name: 'Low Water Level',
                type: 'bar',
                marker: { color: '#45B7D1' }
            });

            var layout1 = {
                title: 'Flow Rate at 50% Gate Opening',
                xaxis: { title: 'Gate Location' },
                yaxis: { title: 'Flow Rate (m³/s)' },
                barmode: 'group'
            };
            
            Plotly.newPlot('flowChart', flowData, layout1);
            
            // Performance curves
            var performanceData = [];
            var openings = [25, 50, 75, 100];
            

            performanceData.push({
                x: [25, 50, 75, 100],
                y: [2.466696026150224, 4.933392052300448, 7.400088078450672, 9.866784104600896],
                name: 'Main Outlet',
                type: 'scatter',
                mode: 'lines+markers',
                line: { width: 3 }
            });

            performanceData.push({
                x: [25, 50, 75, 100],
                y: [1.6444640174334826, 3.288928034866965, 4.933392052300448, 6.57785606973393],
                name: '9R Branch',
                type: 'scatter',
                mode: 'lines+markers',
                line: { width: 3 }
            });

            performanceData.push({
                x: [25, 50, 75, 100],
                y: [0.9866784104600897, 1.9733568209201795, 2.9600352313802696, 3.946713641840359],
                name: '38R Branch',
                type: 'scatter',
                mode: 'lines+markers',
                line: { width: 3 }
            });

            var layout2 = {
                title: 'Gate Performance Curves (Normal Water Level)',
                xaxis: { title: 'Gate Opening (%)' },
                yaxis: { title: 'Flow Rate (m³/s)' },
                hovermode: 'x unified'
            };
            
            Plotly.newPlot('performanceChart', performanceData, layout2);
        </script>
        
        <div class="gate-info" style="margin-top: 30px;">
            <h3>Key Findings</h3>
            <ul>
                <li>Gate flow is highly dependent on upstream/downstream water levels</li>
                <li>Sluice gates show typical quadratic flow-opening relationship</li>
                <li>Radial gates maintain higher efficiency at partial openings</li>
                <li>Butterfly valves provide good flow control for farm turnouts</li>
                <li>Most gates operate in free flow regime under normal conditions</li>
                <li>Submerged flow occurs during high downstream water levels</li>
            </ul>
        </div>
    </div>
</body>
</html>
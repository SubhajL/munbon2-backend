# nginx configuration for old TLS/cipher support
# Deploy on free tier EC2 or any VPS

server {
    listen 443 ssl;
    server_name api.munbon.example.com;

    # SSL Configuration with old protocol support
    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    
    # Specific cipher suites
    ssl_ciphers 'TLS_RSA_WITH_AES_256_CBC_SHA:TLS_RSA_WITH_AES_128_CBC_SHA:TLS_RSA_WITH_RC4_128_SHA:TLS_RSA_WITH_RC4_128_MD5:TLS_RSA_WITH_3DES_EDE_CBC_SHA:TLS_RSA_WITH_AES_256_CBC_SHA256';
    
    ssl_prefer_server_ciphers on;
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;

    # Proxy to API Gateway
    location / {
        proxy_pass https://c0zc2kfzd6.execute-api.ap-southeast-1.amazonaws.com;
        proxy_set_header Host c0zc2kfzd6.execute-api.ap-southeast-1.amazonaws.com;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_ssl_server_name on;
    }
}

# How to deploy:
# 1. Use AWS EC2 t2.micro (free tier) or Oracle Cloud (always free)
# 2. Install nginx: sudo apt install nginx
# 3. Get free SSL cert: sudo certbot --nginx
# 4. Apply this config and restart nginx